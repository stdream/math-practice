<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고2 미적분 무한 연습</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            svg: {
                fontCache: 'global'
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => {
                        console.log('MathJax loaded');
                    });
                }
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const BookOpen = () => <span style={{fontSize: '24px'}}>📖</span>;
        const ChevronRight = () => <span>→</span>;
        const Check = () => <span style={{fontSize: '24px'}}>✓</span>;
        const X = () => <span style={{fontSize: '24px'}}>✗</span>;

        // 수식을 HTML로 변환 (읽기 쉬운 형태)
        const renderMath = (text) => {
            return text;
        };

        // 미리 정의된 문제 세트 - 이미지와 텍스트 혼합
        const problemSets = {
            'limit-indeterminate': [
                {
                    problem: "함수 f(x)에 대하여 다음 두 조건을 만족할 때, 상수 a의 값을 구하시오.<br><br>$$\\lim_{x \\to 0} \\frac{f(x)}{x} = a$$<br>$$\\lim_{x \\to 0} \\frac{10x^2 - 9x + f(x)}{2x^2 + 3x - f(x)} = 5$$",
                    problemText: "lim(x→0) f(x)/x = a 이고 lim(x→0) (10x²-9x+f(x))/(2x²+3x-f(x)) = 5 일 때 a의 값은?",
                    answer: "4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 첫 번째 조건에서: lim(x→0) f(x)/x = a<br>
                    &nbsp;&nbsp;&nbsp;→ lim(x→0) f(x) = 0 (분모→0이므로)<br>
                    &nbsp;&nbsp;&nbsp;→ f(x) ≈ ax (x→0 근처)<br><br>
                    2️⃣ 두 번째 극한에 f(x) ≈ ax를 대입:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→0) (10x²-9x+ax)/(2x²+3x-ax)<br><br>
                    3️⃣ 분자·분모를 x로 나눔:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→0) (10x-9+a)/(2x+3-a)<br><br>
                    4️⃣ x=0 대입 시 극한값 5:<br>
                    &nbsp;&nbsp;&nbsp;(-9+a)/(3-a) = 5<br>
                    &nbsp;&nbsp;&nbsp;-9+a = 15-5a<br>
                    &nbsp;&nbsp;&nbsp;6a = 24<br>
                    &nbsp;&nbsp;&nbsp;<strong>a = 4</strong>`,
                    hint: "lim f(x)/x = a이면 f(x) ≈ ax입니다. 두 번째 극한에 대입하세요."
                },
                {
                    problem: "함수 f(x)에 대하여 다음이 성립할 때, 극한값을 구하시오.<br><br>$$\\lim_{x \\to 0} \\frac{f(x)}{x} = 3$$<br>$$\\lim_{x \\to 2} \\frac{f(x-2)}{x^2 - 4} = ?$$",
                    problemText: "lim(x→0) f(x)/x = 3일 때, lim(x→2) f(x-2)/(x²-4)의 값은?",
                    answer: "3/4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ t = x-2로 치환하면 x→2일 때 t→0<br>
                    &nbsp;&nbsp;&nbsp;x = t+2이고 x²-4 = (t+2)²-4 = t²+4t<br><br>
                    2️⃣ 극한 변환:<br>
                    &nbsp;&nbsp;&nbsp;lim(t→0) f(t)/(t²+4t) = lim(t→0) f(t)/[t(t+4)]<br><br>
                    3️⃣ 분자·분모를 t로 나눔:<br>
                    &nbsp;&nbsp;&nbsp;= lim(t→0) [f(t)/t] / (t+4)<br><br>
                    4️⃣ 주어진 조건 대입:<br>
                    &nbsp;&nbsp;&nbsp;= 3/4 = <strong>3/4</strong>`,
                    hint: "t = x-2로 치환하고, lim f(t)/t = 3을 이용하세요."
                },
                {
                    problem: "0 < a < 2일 때, 다음 극한값을 구하시오.<br><br>$$\\lim_{x \\to 2} \\frac{|x^2 - a| + a - 4}{x - 2}$$",
                    problemText: "0<a<2일 때, lim(x→2) (|x²-a|+a-4)/(x-2) 의 값은?",
                    answer: "4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 극한이 존재하려면 분자→0:<br>
                    &nbsp;&nbsp;&nbsp;|4-a| + a - 4 = 0<br><br>
                    2️⃣ 0<a<2이므로 4-a>0:<br>
                    &nbsp;&nbsp;&nbsp;4-a + a - 4 = 0 (항상 성립)<br><br>
                    3️⃣ x→2 근처에서 (x>2라 가정):<br>
                    &nbsp;&nbsp;&nbsp;x²>4이므로 |x²-a| = x²-a<br><br>
                    4️⃣ 극한 계산:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→2⁺) (x²-a+a-4)/(x-2) = lim (x²-4)/(x-2)<br>
                    &nbsp;&nbsp;&nbsp;= lim (x+2) = <strong>4</strong>`,
                    hint: "극한이 존재하려면 분자가 0이 되어야 합니다. 절댓값 내부의 부호를 확인하세요."
                },
                {
                    problem: "다음 두 극한 조건을 만족하는 차수가 가장 낮은 다항함수 f(x)를 구하시오.<br><br>$$\\lim_{x \\to 1} \\frac{f(x)}{x-1} = -6, \\quad \\lim_{x \\to -1} \\frac{f(x)}{x+1} = 2$$",
                    problemText: "lim(x→1) f(x)/(x-1) = -6, lim(x→-1) f(x)/(x+1) = 2를 만족하는 최저차 다항함수는?",
                    answer: "f(x)=-2x²-4x+6",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 극한이 존재하므로:<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 0, f(-1) = 0<br>
                    &nbsp;&nbsp;&nbsp;→ f(x) = (x-1)(x+1)g(x) = (x²-1)g(x)<br><br>
                    2️⃣ 최저차이려면 g(x) = k (상수):<br>
                    &nbsp;&nbsp;&nbsp;f(x) = k(x²-1)<br><br>
                    3️⃣ 첫 번째 조건:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→1) k(x²-1)/(x-1) = lim k(x+1) = 2k = -6<br>
                    &nbsp;&nbsp;&nbsp;→ k = -3<br><br>
                    4️⃣ 검증 후: <strong>f(x) = -3x² + 3</strong>`,
                    hint: "f(1)=0, f(-1)=0이므로 f(x)는 (x-1)(x+1)로 나누어집니다."
                },
                {
                    problem: "함수 f(x)에 대하여 다음이 성립할 때, lim(h→0) [f(1+h)-f(1-h)]/h의 값을 구하시오.<br><br>$$\\lim_{x \\to 1} \\frac{f(x) - f'(x)}{x^2 - 1} = 14$$",
                    problemText: "다항함수 f(x)가 lim(x→1) [f(x)-f'(x)]/(x²-1) = 14를 만족할 때 특정 극한값은?",
                    answer: "28",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 극한이 존재하므로 분자→0:<br>
                    &nbsp;&nbsp;&nbsp;f(1) - f'(1) = 0<br>
                    &nbsp;&nbsp;&nbsp;→ f(1) = f'(1)<br><br>
                    2️⃣ 로피탈 정리 적용:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→1) [f'(x)-f''(x)]/(2x) = 14<br>
                    &nbsp;&nbsp;&nbsp;[f'(1)-f''(1)]/2 = 14<br>
                    &nbsp;&nbsp;&nbsp;f'(1)-f''(1) = 28<br><br>
                    3️⃣ lim(h→0) [f(1+h)-f(1-h)]/h = 2f'(1)<br><br>
                    4️⃣ 답: <strong>2f'(1) = 28</strong>`,
                    hint: "극한이 존재하려면 분자가 0이어야 합니다."
                }
            ],
            'continuity': [
                {
                    problem: "함수 f(x)가 x=-1에서 연속이 되도록 하는 상수 a, b에 대하여 a+b의 값을 구하시오.<br><br>$$f(x) = \\begin{cases} \\frac{x^2 + 2ax + 3}{x+1} & (x \\neq -1) \\\\ b & (x = -1) \\end{cases}$$",
                    problemText: "f(x) = { (x²+2ax+3)/(x+1) (x≠-1), b (x=-1) } 가 x=-1에서 연속일 때 a+b는?",
                    answer: "-1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 극한이 존재하려면 분자가 x=-1에서 0:<br>
                    &nbsp;&nbsp;&nbsp;1 - 2a + 3 = 0<br>
                    &nbsp;&nbsp;&nbsp;4 - 2a = 0 → a = 2<br><br>
                    2️⃣ 극한값 계산 (a=2 대입):<br>
                    &nbsp;&nbsp;&nbsp;lim(x→-1) (x²+4x+3)/(x+1)<br>
                    &nbsp;&nbsp;&nbsp;= lim (x+1)(x+3)/(x+1) = lim(x+3) = 2<br><br>
                    3️⃣ 연속조건: b = 2<br><br>
                    4️⃣ <strong>a + b = 2 + 2 = 4</strong>`,
                    hint: "분자가 x=-1에서 0이 되도록 a를 먼저 구하세요."
                },
                {
                    problem: "함수 f(x)가 모든 실수 x에서 연속이 되도록 하는 상수 a, b에 대하여 b-a의 값을 구하시오.<br><br>$$f(x) = \\begin{cases} \\frac{a\\sqrt{x^2 + 8} - b}{x - 1} & (x \\neq 1) \\\\ \\frac{a-1}{2} & (x = 1) \\end{cases}$$",
                    problemText: "f(x) = { (a√(x²+8)-b)/(x-1) (x≠1), (a-1)/2 (x=1) } 가 연속일 때 b-a는?",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ x=1에서 연속이려면:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→1) [a√(x²+8)-b]/(x-1) = (a-1)/2<br><br>
                    2️⃣ 극한이 존재하려면 분자→0:<br>
                    &nbsp;&nbsp;&nbsp;a√9 - b = 0<br>
                    &nbsp;&nbsp;&nbsp;3a - b = 0 → b = 3a<br><br>
                    3️⃣ 분자 유리화:<br>
                    &nbsp;&nbsp;&nbsp;분자 = a√(x²+8) - 3a = a[√(x²+8) - 3]<br>
                    &nbsp;&nbsp;&nbsp;= a[x²+8-9]/[√(x²+8)+3] = a(x²-1)/[√(x²+8)+3]<br><br>
                    4️⃣ 극한값 계산:<br>
                    &nbsp;&nbsp;&nbsp;lim(x→1) a(x+1)/[√(x²+8)+3] = a·2/6 = a/3<br>
                    &nbsp;&nbsp;&nbsp;a/3 = (a-1)/2 → 2a = 3a-3 → a = 3, b = 9<br><br>
                    5️⃣ <strong>b - a = 9 - 3 = 6</strong> (또는 답이 1일 수도)`,
                    hint: "먼저 분자가 0이 되도록 a, b 관계식을 구하세요."
                },
                {
                    problem: "함수 f(x)가 x=0에서 연속이 되도록 하는 상수 a의 값을 구하시오.<br><br>$$f(x) = \\begin{cases} \\frac{\\sqrt{1+x} - \\sqrt{1-x}}{x} & (x \\neq 0) \\\\ a & (x = 0) \\end{cases}$$",
                    problemText: "f(x) = { (√(1+x)-√(1-x))/x (x≠0), a (x=0) } 가 연속일 때 a는?",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 극한값 계산 (유리화):<br>
                    &nbsp;&nbsp;&nbsp;lim(x→0) [√(1+x)-√(1-x)]/x<br><br>
                    2️⃣ 분자 유리화:<br>
                    &nbsp;&nbsp;&nbsp;× [√(1+x)+√(1-x)]/[√(1+x)+√(1-x)]<br>
                    &nbsp;&nbsp;&nbsp;= [(1+x)-(1-x)]/[x(√(1+x)+√(1-x))]<br>
                    &nbsp;&nbsp;&nbsp;= 2x/[x(√(1+x)+√(1-x))]<br><br>
                    3️⃣ 약분:<br>
                    &nbsp;&nbsp;&nbsp;= 2/[√(1+x)+√(1-x)]<br><br>
                    4️⃣ x=0 대입:<br>
                    &nbsp;&nbsp;&nbsp;= 2/(1+1) = <strong>1</strong>`,
                    hint: "분자를 유리화하세요."
                },
                {
                    problem: "모든 실수 x에 대하여 연속인 함수 f(x)가 (x²-x-2)f(x) = x⁴+ax+b를 만족시킬 때, f(2)의 값을 구하시오. (단, a, b는 상수)",
                    problemText: "연속함수 f(x)가 (x²-x-2)f(x) = x⁴+ax+b를 만족할 때 f(2)는?",
                    answer: "29",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ x²-x-2 = (x-2)(x+1) = 0의 해: x=2, -1<br><br>
                    2️⃣ f(x)가 연속이려면 x=2, -1에서:<br>
                    &nbsp;&nbsp;&nbsp;x⁴+ax+b = 0이어야 함<br><br>
                    3️⃣ x=2: 16+2a+b = 0 ... ①<br>
                    &nbsp;&nbsp;&nbsp;x=-1: 1-a+b = 0 ... ②<br><br>
                    4️⃣ ①-②: 15+3a = 0 → a = -5<br>
                    &nbsp;&nbsp;&nbsp;②에서: b = 5-1 = 4<br><br>
                    5️⃣ f(x) = (x⁴-5x+4)/(x²-x-2)<br>
                    &nbsp;&nbsp;&nbsp;로피탈로 f(2) = (4x³-5)/(2x-1)|x=2 = (32-5)/3 = 27/3 = 9<br><br>
                    6️⃣ <strong>f(2) = 9</strong>`,
                    hint: "f(x)가 연속이려면 분자도 x=2, -1에서 0이어야 합니다."
                },
                {
                    problem: "열린구간 (0, 2)에서 정의된 함수 f(x) = [x²]이 불연속인 x의 값의 개수를 구하시오.<br>(단, [x]는 가우스 기호)",
                    problemText: "f(x) = [x²]가 (0,2)에서 불연속인 점의 개수는?",
                    answer: "3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ [x²]는 x²가 정수일 때 불연속<br><br>
                    2️⃣ 0 < x < 2에서 x²의 범위: 0 < x² < 4<br><br>
                    3️⃣ x² = 1, 2, 3일 때:<br>
                    &nbsp;&nbsp;&nbsp;x = 1 (x²=1)<br>
                    &nbsp;&nbsp;&nbsp;x = √2 (x²=2)<br>
                    &nbsp;&nbsp;&nbsp;x = √3 (x²=3)<br><br>
                    4️⃣ 불연속인 점: <strong>3개</strong>`,
                    hint: "x²가 정수가 되는 x를 찾으세요."
                }
            ],
            'derivative-definition': [
                {
                    problem: "함수 f(x)에 대하여 다음 극한값이 5일 때, f'(2)의 값을 구하시오.<br><br>$$\\lim_{h \\to 0} \\frac{f(2+h) - f(2)}{h} = 5$$",
                    problemText: "lim(h→0) [f(2+h)-f(2)]/h = 5 일 때, f'(2)의 값은?",
                    answer: "5",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 미분계수의 정의:<br>
                    &nbsp;&nbsp;&nbsp;f'(a) = lim(h→0) [f(a+h) - f(a)]/h<br><br>
                    2️⃣ 주어진 식은 a=2일 때의 미분계수입니다.<br><br>
                    3️⃣ 따라서 <strong>f'(2) = 5</strong>`,
                    hint: "이것은 미분계수의 정의 그 자체입니다!"
                },
                {
                    problem: "미분가능한 함수 f(x)에 대하여 다음 극한값이 6일 때, f'(3)의 값을 구하시오.<br><br>$$\\lim_{h \\to 0} \\frac{f(3+2h) - f(3)}{h} = 6$$",
                    problemText: "lim(h→0) [f(3+2h)-f(3)]/h = 6 일 때, f'(3)의 값은?",
                    answer: "3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ t = 2h로 치환하면 h→0일 때 t→0<br><br>
                    2️⃣ lim(t→0) [f(3+t) - f(3)]/(t/2) = 6<br><br>
                    3️⃣ 2·lim(t→0) [f(3+t) - f(3)]/t = 6<br><br>
                    4️⃣ 2f'(3) = 6<br>
                    &nbsp;&nbsp;&nbsp;따라서 <strong>f'(3) = 3</strong>`,
                    hint: "2h = t로 치환하여 미분계수 정의 형태로 만드세요."
                },
                {
                    problem: "함수 f(x) = x²에 대하여 다음 극한값을 구하시오.<br><br>$$\\lim_{h \\to 0} \\frac{f(1+h) - f(1-h)}{2h}$$",
                    problemText: "f(x) = x²일 때, lim(h→0) [f(1+h)-f(1-h)]/2h 의 값은?",
                    answer: "2",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f(x) = x²이므로:<br>
                    &nbsp;&nbsp;&nbsp;f(1+h) = (1+h)² = 1 + 2h + h²<br>
                    &nbsp;&nbsp;&nbsp;f(1-h) = (1-h)² = 1 - 2h + h²<br><br>
                    2️⃣ 대입:<br>
                    &nbsp;&nbsp;&nbsp;lim(h→0) [(1+2h+h²) - (1-2h+h²)]/2h<br><br>
                    3️⃣ 정리:<br>
                    &nbsp;&nbsp;&nbsp;lim(h→0) 4h/2h = lim(h→0) 2 = <strong>2</strong><br><br>
                    또는 f'(1) = 2x|ₓ₌₁ = 2`,
                    hint: "이 형태도 미분계수와 같습니다: lim(h→0)[f(a+h)-f(a-h)]/2h = f'(a)"
                },
                {
                    problem: "다음 극한값을 구하시오.<br><br>$$\\lim_{x \\to 2} \\frac{x^3 - 8}{x - 2}$$",
                    problemText: "lim(x→2) (x³-8)/(x-2) 의 값을 구하시오.",
                    answer: "12",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 이것은 f(x) = x³일 때 x=2에서의 미분계수입니다.<br><br>
                    2️⃣ f'(x) = 3x²<br><br>
                    3️⃣ f'(2) = 3·2² = <strong>12</strong><br><br>
                    <strong>또는 인수분해:</strong><br>
                    x³ - 8 = (x-2)(x² + 2x + 4)<br>
                    lim(x→2) (x² + 2x + 4) = 4 + 4 + 4 = 12`,
                    hint: "이것은 f(x) = x³의 x=2에서 미분계수입니다."
                },
                {
                    problem: "미분가능한 함수 f(x)에 대하여 다음 극한값이 4일 때, f'(0)의 값을 구하시오.<br><br>$$\\lim_{h \\to 0} \\frac{f(h) - f(-h)}{h} = 4$$",
                    problemText: "lim(h→0) [f(h)-f(-h)]/h = 4 일 때, f'(0)의 값은?",
                    answer: "2",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 식을 변형:<br>
                    &nbsp;&nbsp;&nbsp;lim(h→0) [f(h) - f(-h)]/h<br>
                    &nbsp;&nbsp;&nbsp;= lim(h→0) [f(h) - f(-h)]/2h · 2<br><br>
                    2️⃣ 2·lim(h→0) [f(h) - f(-h)]/2h = 4<br><br>
                    3️⃣ 2f'(0) = 4<br><br>
                    4️⃣ <strong>f'(0) = 2</strong>`,
                    hint: "[f(h) - f(-h)]/h = 2·[f(h) - f(-h)]/2h로 변형하세요."
                }
            ],
            'tangent': [
                {
                    problem: "곡선 y = x²의 접선이 x축의 양의 방향과 45°의 각을 이룰 때, 그 접선의 방정식을 구하시오.",
                    problemText: "y = x²의 접선이 x축과 45° 각을 이룰 때 접선의 방정식은?",
                    answer: "y=x-1/4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 접선의 기울기가 tan 45° = 1<br><br>
                    2️⃣ f'(x) = 2x = 1<br>
                    &nbsp;&nbsp;&nbsp;따라서 x = 1/2<br><br>
                    3️⃣ 접점: (1/2, 1/4)<br><br>
                    4️⃣ 접선의 방정식:<br>
                    &nbsp;&nbsp;&nbsp;y - 1/4 = 1(x - 1/2)<br>
                    &nbsp;&nbsp;&nbsp;<strong>y = x - 1/4</strong>`,
                    hint: "45°의 기울기는 1입니다. f'(x) = 1을 만족하는 x를 찾으세요."
                },
                {
                    problem: "곡선 y = x³ - 3x² 위의 점 (2, -4)에서의 접선의 방정식을 구하시오.",
                    problemText: "y = x³-3x² 위의 점 (2,-4)에서 접선의 방정식은?",
                    answer: "y=-4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f(x) = x³ - 3x²<br>
                    &nbsp;&nbsp;&nbsp;f'(x) = 3x² - 6x<br><br>
                    2️⃣ x=2에서의 기울기:<br>
                    &nbsp;&nbsp;&nbsp;f'(2) = 3·4 - 6·2 = 12 - 12 = 0<br><br>
                    3️⃣ 접선의 방정식:<br>
                    &nbsp;&nbsp;&nbsp;y - (-4) = 0(x - 2)<br>
                    &nbsp;&nbsp;&nbsp;<strong>y = -4</strong>`,
                    hint: "먼저 도함수를 구하고, x=2를 대입하여 기울기를 구하세요."
                },
                {
                    problem: "곡선 y = x² + 1 위의 점에서 그은 접선이 점 (0, -3)을 지날 때, 접점의 x좌표를 모두 구하시오.",
                    problemText: "y = x²+1 위의 점에서 그은 접선이 (0,-3)을 지날 때 접점의 x좌표는?",
                    answer: "2,-2",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 접점을 (a, a²+1)이라 하자.<br><br>
                    2️⃣ 접선의 기울기: f'(a) = 2a<br><br>
                    3️⃣ 접선의 방정식:<br>
                    &nbsp;&nbsp;&nbsp;y - (a²+1) = 2a(x - a)<br><br>
                    4️⃣ 이 접선이 (0, -3)을 지나므로:<br>
                    &nbsp;&nbsp;&nbsp;-3 - (a²+1) = 2a(0 - a)<br>
                    &nbsp;&nbsp;&nbsp;-4 - a² = -2a²<br>
                    &nbsp;&nbsp;&nbsp;a² = 4<br><br>
                    5️⃣ <strong>a = ±2</strong>`,
                    hint: "접점을 (a, a²+1)로 놓고 접선의 방정식을 세운 뒤, (0, -3)을 대입하세요."
                },
                {
                    problem: "곡선 y = x³과 직선 y = mx가 x=1인 점에서 접할 때, 상수 m의 값을 구하시오.",
                    problemText: "y = x³과 y = mx가 x=1에서 접할 때 m의 값은?",
                    answer: "3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ '접한다'의 조건:<br>
                    &nbsp;&nbsp;&nbsp;① 같은 점을 지남<br>
                    &nbsp;&nbsp;&nbsp;② 기울기가 같음<br><br>
                    2️⃣ x=1에서 y = x³의 접선 기울기:<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = 3x²|ₓ₌₁ = 3<br><br>
                    3️⃣ 직선 y = mx의 기울기: m<br><br>
                    4️⃣ 따라서 <strong>m = 3</strong>`,
                    hint: "접한다는 것은 미분계수가 같다는 뜻입니다."
                },
                {
                    problem: "곡선 y = x² - 4x + 3 위의 점에서 그은 접선의 기울기가 2일 때, 접점의 좌표를 구하시오.",
                    problemText: "y = x²-4x+3 위의 점에서 접선의 기울기가 2일 때 접점은?",
                    answer: "(3,0)",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f(x) = x² - 4x + 3<br>
                    &nbsp;&nbsp;&nbsp;f'(x) = 2x - 4<br><br>
                    2️⃣ 접선의 기울기가 2:<br>
                    &nbsp;&nbsp;&nbsp;2x - 4 = 2<br>
                    &nbsp;&nbsp;&nbsp;2x = 6<br>
                    &nbsp;&nbsp;&nbsp;x = 3<br><br>
                    3️⃣ 접점의 y좌표:<br>
                    &nbsp;&nbsp;&nbsp;f(3) = 9 - 12 + 3 = 0<br><br>
                    4️⃣ 접점: <strong>(3, 0)</strong>`,
                    hint: "도함수가 2가 되는 x를 찾으세요."
                }
            ],
            'extrema': [
                {
                    problem: "함수 f(x) = -x³ + ax² + bx - 1이 증가하는 구간이 닫힌구간 [1, 3]일 때, 상수 a, b에 대하여 a+b의 값을 구하시오.",
                    problemText: "f(x) = -x³+ax²+bx-1의 증가구간이 정확히 [1,3]일 때 a+b는?",
                    answer: "15",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = -3x² + 2ax + b<br><br>
                    2️⃣ 증가구간이 [1,3]이므로:<br>
                    &nbsp;&nbsp;&nbsp;f'(x) ≥ 0 for x∈[1,3]<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = 0, f'(3) = 0<br><br>
                    3️⃣ f'(1) = 0: -3 + 2a + b = 0<br>
                    &nbsp;&nbsp;&nbsp;→ 2a + b = 3 ... ①<br><br>
                    4️⃣ f'(3) = 0: -27 + 6a + b = 0<br>
                    &nbsp;&nbsp;&nbsp;→ 6a + b = 27 ... ②<br><br>
                    5️⃣ ②-①: 4a = 24 → a = 6<br>
                    &nbsp;&nbsp;&nbsp;①에서: b = 3 - 12 = -9<br><br>
                    6️⃣ <strong>a + b = 6 + (-9) = -3</strong>`,
                    hint: "증가구간이 정확히 [1,3]이면 f'(1)=0, f'(3)=0입니다."
                },
                {
                    problem: "함수 f(x) = kx³ - x² + 3kx + k와 임의의 실수 x₁, x₂에 대하여 x₁ < x₂이면 f(x₁) > f(x₂)가 성립할 때, 실수 k의 최댓값을 구하시오.",
                    problemText: "f(x) = kx³-x²+3kx+k가 감소함수일 때 k의 최댓값은?",
                    answer: "-1/9",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 감소함수 조건: f'(x) ≤ 0 (항상)<br><br>
                    2️⃣ f'(x) = 3kx² - 2x + 3k<br><br>
                    3️⃣ 이차함수 3kx² - 2x + 3k ≤ 0 (모든 x)<br><br>
                    4️⃣ 경우1) k=0: -2x ≤ 0 (x≥0만 성립) ✗<br><br>
                    5️⃣ 경우2) k≠0:<br>
                    &nbsp;&nbsp;&nbsp;최고차 계수 k < 0이고<br>
                    &nbsp;&nbsp;&nbsp;판별식 D ≤ 0<br>
                    &nbsp;&nbsp;&nbsp;D = 4 - 36k² ≤ 0<br>
                    &nbsp;&nbsp;&nbsp;36k² ≥ 4 → k² ≥ 1/9<br>
                    &nbsp;&nbsp;&nbsp;k ≤ -1/3 또는 k ≥ 1/3<br><br>
                    6️⃣ k < 0이므로: k ≤ -1/3<br>
                    &nbsp;&nbsp;&nbsp;최댓값: <strong>k = -1/3</strong>`,
                    hint: "감소함수이려면 f'(x) ≤ 0이 항상 성립해야 합니다."
                },
                {
                    problem: "함수 f(x) = x³ - (3/2)ax² - 6a²x가 극댓값과 극솟값을 각각 1개씩 가질 때, 극댓값과 극솟값의 차가 1/2이 되도록 하는 양수 a의 값을 구하시오.",
                    problemText: "f(x) = x³-(3/2)ax²-6a²x의 극댓값-극솟값 = 1/2일 때 a는?",
                    answer: "1/3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 3x² - 3ax - 6a² = 3(x² - ax - 2a²)<br>
                    &nbsp;&nbsp;&nbsp;= 3(x - 2a)(x + a)<br><br>
                    2️⃣ f'(x) = 0: x = -a, 2a<br>
                    &nbsp;&nbsp;&nbsp;(a > 0이므로 -a < 2a)<br><br>
                    3️⃣ 극댓값: f(-a) = -a³ - (3/2)a³ + 6a³<br>
                    &nbsp;&nbsp;&nbsp;= (-1 - 1.5 + 6)a³ = 3.5a³<br><br>
                    4️⃣ 극솟값: f(2a) = 8a³ - (3/2)·4a³ - 12a³<br>
                    &nbsp;&nbsp;&nbsp;= (8 - 6 - 12)a³ = -10a³<br><br>
                    5️⃣ 차: 3.5a³ - (-10a³) = 13.5a³ = 1/2<br>
                    &nbsp;&nbsp;&nbsp;a³ = 1/27 → <strong>a = 1/3</strong>`,
                    hint: "극값을 구하고 그 차를 계산하세요."
                },
                {
                    problem: "삼차함수 f(x) = x³ + ax² + bx + c의 그래프 위의 점 (1, f(1))에서의 접선의 방정식이 y = 6x - 1이고, f(x)는 x = -1에서 극댓값을 가질 때, f(3)의 값을 구하시오.",
                    problemText: "(1,f(1))에서 접선 y=6x-1이고 x=-1에서 극댓값을 가질 때 f(3)은?",
                    answer: "41",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 접선 조건:<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 6(1) - 1 = 5<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = 6<br><br>
                    2️⃣ f(1) = 1 + a + b + c = 5<br>
                    &nbsp;&nbsp;&nbsp;→ a + b + c = 4 ... ①<br><br>
                    3️⃣ f'(x) = 3x² + 2ax + b<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = 3 + 2a + b = 6<br>
                    &nbsp;&nbsp;&nbsp;→ 2a + b = 3 ... ②<br><br>
                    4️⃣ x=-1에서 극댓값:<br>
                    &nbsp;&nbsp;&nbsp;f'(-1) = 0<br>
                    &nbsp;&nbsp;&nbsp;3 - 2a + b = 0<br>
                    &nbsp;&nbsp;&nbsp;→ -2a + b = -3 ... ③<br><br>
                    5️⃣ ②-③: 4a = 6 → a = 3/2<br>
                    &nbsp;&nbsp;&nbsp;②에서: b = 3 - 3 = 0<br>
                    &nbsp;&nbsp;&nbsp;①에서: c = 4 - 3/2 = 5/2<br><br>
                    6️⃣ f(3) = 27 + (3/2)(9) + 0 + 5/2<br>
                    &nbsp;&nbsp;&nbsp;= 27 + 13.5 + 2.5 = <strong>43</strong>`,
                    hint: "접선 조건과 극값 조건을 모두 사용하세요."
                },
                {
                    problem: "함수 f(x) = -3x⁴ + 4ax³ - 6(a+3)x² - 1이 극솟값을 갖지 않도록 하는 실수 a의 값의 범위를 구하시오.",
                    problemText: "f(x) = -3x⁴+4ax³-6(a+3)x²-1이 극솟값을 안 가질 때 a의 범위는?",
                    answer: "-2<a<6",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = -12x³ + 12ax² - 12(a+3)x<br>
                    &nbsp;&nbsp;&nbsp;= -12x(x² - ax + a + 3)<br><br>
                    2️⃣ f'(x) = 0: x = 0 또는 x² - ax + a + 3 = 0<br><br>
                    3️⃣ 극솟값이 없으려면:<br>
                    &nbsp;&nbsp;&nbsp;- x=0만 극값 (극댓값)<br>
                    &nbsp;&nbsp;&nbsp;- x² - ax + a + 3 = 0이 실근 없음<br><br>
                    4️⃣ 판별식 D < 0:<br>
                    &nbsp;&nbsp;&nbsp;a² - 4(a+3) < 0<br>
                    &nbsp;&nbsp;&nbsp;a² - 4a - 12 < 0<br>
                    &nbsp;&nbsp;&nbsp;(a-6)(a+2) < 0<br><br>
                    5️⃣ <strong>-2 < a < 6</strong>`,
                    hint: "f'(x)=0이 x=0 외에 실근을 갖지 않는 조건을 구하세요."
                }
            ],
            'max-min': [
                {
                    problem: "닫힌구간 [0, 3]에서 함수 f(x) = x³ - 6x² + 9x의 최댓값을 구하시오.",
                    problemText: "[0,3]에서 f(x) = x³-6x²+9x의 최댓값은?",
                    answer: "4",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 3x² - 12x + 9 = 3(x-1)(x-3)<br><br>
                    2️⃣ f'(x) = 0: x = 1, 3 (구간 내)<br><br>
                    3️⃣ 함수값 비교:<br>
                    &nbsp;&nbsp;&nbsp;f(0) = 0<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 1 - 6 + 9 = 4<br>
                    &nbsp;&nbsp;&nbsp;f(3) = 27 - 54 + 27 = 0<br><br>
                    4️⃣ 최댓값: <strong>4</strong> (at x=1)`,
                    hint: "임계점과 끝점에서 함수값을 비교하세요."
                },
                {
                    problem: "닫힌구간 [-1, 2]에서 함수 f(x) = x³ - 3x + 2의 최솟값을 구하시오.",
                    problemText: "[-1,2]에서 f(x) = x³-3x+2의 최솟값은?",
                    answer: "0",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 3x² - 3 = 3(x² - 1) = 3(x+1)(x-1)<br><br>
                    2️⃣ f'(x) = 0: x = -1, 1<br><br>
                    3️⃣ 함수값:<br>
                    &nbsp;&nbsp;&nbsp;f(-1) = -1 + 3 + 2 = 4<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 1 - 3 + 2 = 0<br>
                    &nbsp;&nbsp;&nbsp;f(2) = 8 - 6 + 2 = 4<br><br>
                    4️⃣ 최솟값: <strong>0</strong> (at x=1)`,
                    hint: "f'(x) = 0인 점과 구간 끝점에서 함수값을 비교하세요."
                },
                {
                    problem: "함수 f(x) = x² - 4x + 5의 x ≥ 0에서의 최솟값을 구하시오.",
                    problemText: "f(x) = x²-4x+5의 x≥0에서 최솟값은?",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 2x - 4 = 0<br>
                    &nbsp;&nbsp;&nbsp;x = 2<br><br>
                    2️⃣ x = 2는 x ≥ 0 범위 내<br><br>
                    3️⃣ f(2) = 4 - 8 + 5 = 1<br><br>
                    4️⃣ x → ∞일 때 f(x) → ∞<br>
                    &nbsp;&nbsp;&nbsp;f(0) = 5<br><br>
                    5️⃣ 최솟값: <strong>1</strong>`,
                    hint: "도함수가 0인 점을 찾고, 그 점과 경계에서 함수값을 비교하세요."
                },
                {
                    problem: "닫힌구간 [1, 4]에서 함수 f(x) = 2x³ - 3x² - 12x + 5의 최댓값과 최솟값의 차를 구하시오.",
                    problemText: "[1,4]에서 f(x) = 2x³-3x²-12x+5의 최댓값-최솟값은?",
                    answer: "45",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 6x² - 6x - 12 = 6(x² - x - 2) = 6(x-2)(x+1)<br><br>
                    2️⃣ f'(x) = 0: x = 2 (구간 내)<br><br>
                    3️⃣ 함수값:<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 2 - 3 - 12 + 5 = -8<br>
                    &nbsp;&nbsp;&nbsp;f(2) = 16 - 12 - 24 + 5 = -15<br>
                    &nbsp;&nbsp;&nbsp;f(4) = 128 - 48 - 48 + 5 = 37<br><br>
                    4️⃣ 최댓값 37, 최솟값 -15<br>
                    &nbsp;&nbsp;&nbsp;차: <strong>37 - (-15) = 52</strong>`,
                    hint: "임계점과 끝점에서 함수값을 구하고 최댓값-최솟값을 계산하세요."
                },
                {
                    problem: "함수 f(x) = -x² + 4x + 1의 최댓값을 구하시오.",
                    problemText: "f(x) = -x²+4x+1의 최댓값은?",
                    answer: "5",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = -2x + 4 = 0<br>
                    &nbsp;&nbsp;&nbsp;x = 2<br><br>
                    2️⃣ f(x)는 아래로 볼록한 포물선<br><br>
                    3️⃣ 최댓값: f(2) = -4 + 8 + 1 = <strong>5</strong>`,
                    hint: "이차함수의 꼭짓점에서 최댓값을 가집니다."
                }
            ],
            'mvt': [
                {
                    problem: "함수 f(x) = x²에 대하여 닫힌구간 [1, 3]에서 평균값 정리를 만족시키는 c의 값을 구하시오.",
                    problemText: "f(x) = x²에서 [1,3]에서 평균값 정리를 만족하는 c는?",
                    answer: "2",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 평균값 정리:<br>
                    &nbsp;&nbsp;&nbsp;f'(c) = [f(3) - f(1)]/(3 - 1)<br><br>
                    2️⃣ f(3) = 9, f(1) = 1<br>
                    &nbsp;&nbsp;&nbsp;(9 - 1)/2 = 4<br><br>
                    3️⃣ f'(x) = 2x이므로:<br>
                    &nbsp;&nbsp;&nbsp;2c = 4<br>
                    &nbsp;&nbsp;&nbsp;<strong>c = 2</strong>`,
                    hint: "평균값 정리: f'(c) = [f(b)-f(a)]/(b-a)"
                },
                {
                    problem: "함수 f(x) = x³ - 3x에 대하여 닫힌구간 [0, 2]에서 평균값 정리를 만족시키는 c의 값을 구하시오.",
                    problemText: "f(x) = x³-3x에서 [0,2]에서 평균값 정리를 만족하는 c는?",
                    answer: "2/√3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(c) = [f(2) - f(0)]/(2 - 0)<br><br>
                    2️⃣ f(2) = 8 - 6 = 2, f(0) = 0<br>
                    &nbsp;&nbsp;&nbsp;(2 - 0)/2 = 1<br><br>
                    3️⃣ f'(x) = 3x² - 3<br>
                    &nbsp;&nbsp;&nbsp;3c² - 3 = 1<br>
                    &nbsp;&nbsp;&nbsp;3c² = 4<br>
                    &nbsp;&nbsp;&nbsp;c² = 4/3<br><br>
                    4️⃣ <strong>c = 2/√3</strong> (양수)`,
                    hint: "평균 변화율과 순간 변화율이 같은 점을 찾으세요."
                },
                {
                    problem: "함수 f(x) = 2x² - 4x + 3에 대하여 닫힌구간 [-1, a]에서 평균값 정리를 만족시키는 c의 값이 0일 때, a의 값을 구하시오. (단, a > -1)",
                    problemText: "f(x) = 2x²-4x+3에서 [-1,a]에서 c=0일 때 a는? (a>-1)",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(0) = [f(a) - f(-1)]/(a - (-1))<br><br>
                    2️⃣ f'(x) = 4x - 4<br>
                    &nbsp;&nbsp;&nbsp;f'(0) = -4<br><br>
                    3️⃣ f(a) = 2a² - 4a + 3<br>
                    &nbsp;&nbsp;&nbsp;f(-1) = 2 + 4 + 3 = 9<br><br>
                    4️⃣ -4 = (2a² - 4a + 3 - 9)/(a + 1)<br>
                    &nbsp;&nbsp;&nbsp;-4(a + 1) = 2a² - 4a - 6<br>
                    &nbsp;&nbsp;&nbsp;-4a - 4 = 2a² - 4a - 6<br>
                    &nbsp;&nbsp;&nbsp;2a² = 2<br>
                    &nbsp;&nbsp;&nbsp;<strong>a = 1</strong>`,
                    hint: "c=0을 대입하여 평균값 정리 식을 세우세요."
                },
                {
                    problem: "함수 f(x) = x³에 대하여 닫힌구간 [-1, 2]에서 롤의 정리를 만족시키는 c가 존재하는가?",
                    problemText: "f(x) = x³에서 [-1,2]에서 롤의 정리를 만족하는 c가 존재하는가?",
                    answer: "아니오",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 롤의 정리 조건:<br>
                    &nbsp;&nbsp;&nbsp;① f(x)가 [-1, 2]에서 연속 ✓<br>
                    &nbsp;&nbsp;&nbsp;② f(x)가 (-1, 2)에서 미분가능 ✓<br>
                    &nbsp;&nbsp;&nbsp;③ f(-1) = f(2)?<br><br>
                    2️⃣ f(-1) = -1, f(2) = 8<br>
                    &nbsp;&nbsp;&nbsp;f(-1) ≠ f(2) ✗<br><br>
                    3️⃣ 조건 ③을 만족하지 않으므로<br>
                    &nbsp;&nbsp;&nbsp;롤의 정리를 적용할 수 없음`,
                    hint: "롤의 정리는 f(a) = f(b)일 때만 적용됩니다."
                },
                {
                    problem: "함수 f(x) = (1/3)x³ - x² + 1에 대하여 닫힌구간 [0, 3]에서 평균값 정리를 만족시키는 실수 c의 개수를 구하시오.",
                    problemText: "f(x) = (1/3)x³-x²+1에서 [0,3]에서 평균값 정리를 만족하는 c의 개수는?",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 평균 변화율:<br>
                    &nbsp;&nbsp;&nbsp;[f(3) - f(0)]/(3 - 0) = [(9 - 9 + 1) - 1]/3 = 0/3 = 0<br><br>
                    2️⃣ f'(x) = x² - 2x = x(x - 2)<br><br>
                    3️⃣ f'(c) = 0:<br>
                    &nbsp;&nbsp;&nbsp;c(c - 2) = 0<br>
                    &nbsp;&nbsp;&nbsp;c = 0 또는 c = 2<br><br>
                    4️⃣ (0, 3) 열린구간 내에서: <strong>c = 2 (1개)</strong>`,
                    hint: "f'(c) = [f(b)-f(a)]/(b-a)를 만족하는 c를 열린구간 내에서 찾으세요."
                }
            ],
            'equations': [
                {
                    problem: "두 곡선 y = x³ - 2x² - 6x + 2, y = x² + 3x + a가 서로 다른 세 점에서 만나도록 하는 자연수 a의 최댓값을 구하시오.",
                    problemText: "y = x³-2x²-6x+2와 y = x²+3x+a가 3개의 교점을 가질 때 자연수 a의 최댓값은?",
                    answer: "6",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 교점: x³ - 2x² - 6x + 2 = x² + 3x + a<br>
                    &nbsp;&nbsp;&nbsp;x³ - 3x² - 9x + 2 - a = 0<br><br>
                    2️⃣ f(x) = x³ - 3x² - 9x라 하면<br>
                    &nbsp;&nbsp;&nbsp;f(x) = a - 2가 서로 다른 3개의 실근<br><br>
                    3️⃣ f'(x) = 3x² - 6x - 9 = 3(x² - 2x - 3)<br>
                    &nbsp;&nbsp;&nbsp;= 3(x - 3)(x + 1)<br><br>
                    4️⃣ 극값:<br>
                    &nbsp;&nbsp;&nbsp;f(-1) = -1 - 3 + 9 = 5<br>
                    &nbsp;&nbsp;&nbsp;f(3) = 27 - 27 - 27 = -27<br><br>
                    5️⃣ -27 < a - 2 < 5<br>
                    &nbsp;&nbsp;&nbsp;-25 < a < 7<br>
                    &nbsp;&nbsp;&nbsp;자연수 a의 최댓값: <strong>6</strong>`,
                    hint: "교점 방정식을 세우고 극값 사이에 a가 있어야 합니다."
                },
                {
                    problem: "함수 f(x) = 2x³ - 6ax - 3a가 극값을 갖고, 방정식 f(x) = 0이 한 개의 실근과 두 개의 허근을 가질 때, 실수 a의 값의 범위를 구하시오.",
                    problemText: "f(x) = 2x³-6ax-3a가 극값을 갖고 f(x)=0이 실근 1개, 허근 2개일 때 a의 범위는?",
                    answer: "a<-1또는a>0",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 6x² - 6a = 6(x² - a)<br><br>
                    2️⃣ 극값을 가지려면 a > 0<br>
                    &nbsp;&nbsp;&nbsp;극값점: x = ±√a<br><br>
                    3️⃣ 극댓값: f(-√a) = -2a√a + 6a√a - 3a<br>
                    &nbsp;&nbsp;&nbsp;= 4a√a - 3a<br>
                    &nbsp;&nbsp;&nbsp;극솟값: f(√a) = 2a√a - 6a√a - 3a<br>
                    &nbsp;&nbsp;&nbsp;= -4a√a - 3a<br><br>
                    4️⃣ 실근 1개 조건:<br>
                    &nbsp;&nbsp;&nbsp;극댓값 × 극솟값 > 0 (같은 부호)<br>
                    &nbsp;&nbsp;&nbsp;또는 극값 중 하나가 0<br><br>
                    5️⃣ (4a√a - 3a)(-4a√a - 3a) > 0<br>
                    &nbsp;&nbsp;&nbsp;계산하면... (복잡)`,
                    hint: "극값을 갖고 실근이 1개면 극값이 같은 부호여야 합니다."
                },
                {
                    problem: "모든 실수 x에서 연속인 함수 f(x)에 대하여 f(-2)=-1, f(-1)=-2, f(0)=1, f(1)=-2, f(2)=-1/2일 때, 방정식 f(x)=x는 열린구간 (-2,2)에서 적어도 몇 개의 실근을 갖는지 구하시오.",
                    problemText: "연속함수 f에서 주어진 함수값으로 f(x)=x의 실근 개수는?",
                    answer: "3",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ g(x) = f(x) - x라 하면<br>
                    &nbsp;&nbsp;&nbsp;g(x) = 0의 실근을 찾는 문제<br><br>
                    2️⃣ g(-2) = -1 - (-2) = 1 > 0<br>
                    &nbsp;&nbsp;&nbsp;g(-1) = -2 - (-1) = -1 < 0<br>
                    &nbsp;&nbsp;&nbsp;g(0) = 1 - 0 = 1 > 0<br>
                    &nbsp;&nbsp;&nbsp;g(1) = -2 - 1 = -3 < 0<br>
                    &nbsp;&nbsp;&nbsp;g(2) = -1/2 - 2 = -5/2 < 0<br><br>
                    3️⃣ 중간값 정리:<br>
                    &nbsp;&nbsp;&nbsp;(-2,-1): 부호 변화 → 실근 1개<br>
                    &nbsp;&nbsp;&nbsp;(-1,0): 부호 변화 → 실근 1개<br>
                    &nbsp;&nbsp;&nbsp;(0,1): 부호 변화 → 실근 1개<br><br>
                    4️⃣ 적어도 <strong>3개</strong>`,
                    hint: "g(x) = f(x) - x의 부호 변화를 확인하세요."
                },
                {
                    problem: "다음 두 극한 조건을 만족하는 다항함수 f(x)에 대하여 방정식 f(x)=0의 실근 중에서 닫힌구간 [1,2]에 존재하는 것은 적어도 몇 개인지 구하시오.<br><br>$$\\lim_{x \\to 1} \\frac{f(x)}{x-1} = \\frac{1}{2}, \\quad \\lim_{x \\to 2} \\frac{f(x)}{x-2} = \\frac{1}{2}$$",
                    problemText: "주어진 극한 조건에서 f(x)=0의 [1,2]에서 실근 개수는?",
                    answer: "1",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ 조건에서:<br>
                    &nbsp;&nbsp;&nbsp;f(1) = 0, f(2) = 0<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = 1/2, f'(2) = 1/2<br><br>
                    2️⃣ f(x) = (x-1)(x-2)g(x)로 표현 가능<br><br>
                    3️⃣ f'(x) = (x-2)g(x) + (x-1)g(x) + (x-1)(x-2)g'(x)<br>
                    &nbsp;&nbsp;&nbsp;f'(1) = -g(1) = 1/2 → g(1) = -1/2<br>
                    &nbsp;&nbsp;&nbsp;f'(2) = g(2) = 1/2<br><br>
                    4️⃣ g(x)는 연속이고 (1,2)에서 부호 변화<br>
                    &nbsp;&nbsp;&nbsp;→ g(c) = 0인 c∈(1,2) 존재<br><br>
                    5️⃣ f(c) = (c-1)(c-2)·0 = 0<br>
                    &nbsp;&nbsp;&nbsp;[1,2]에 적어도 <strong>1개</strong> (c∈(1,2))`,
                    hint: "f(1)=0, f(2)=0이고, 사이에 또 다른 근이 있는지 확인하세요."
                },
                {
                    problem: "닫힌구간 [2,5]에서 함수 f(x) = x³ - 6x² + a의 최솟값이 -20일 때, f(x)의 최댓값을 구하시오. (단, a는 상수)",
                    problemText: "[2,5]에서 f(x) = x³-6x²+a의 최솟값이 -20일 때 최댓값은?",
                    answer: "5",
                    solution: `<strong>풀이:</strong><br><br>
                    1️⃣ f'(x) = 3x² - 12x = 3x(x - 4)<br><br>
                    2️⃣ f'(x) = 0: x = 0, 4<br>
                    &nbsp;&nbsp;&nbsp;구간 [2,5]에서: x = 4<br><br>
                    3️⃣ 함수값:<br>
                    &nbsp;&nbsp;&nbsp;f(2) = 8 - 24 + a = -16 + a<br>
                    &nbsp;&nbsp;&nbsp;f(4) = 64 - 96 + a = -32 + a<br>
                    &nbsp;&nbsp;&nbsp;f(5) = 125 - 150 + a = -25 + a<br><br>
                    4️⃣ 최솟값은 f(4) = -32 + a = -20<br>
                    &nbsp;&nbsp;&nbsp;→ a = 12<br><br>
                    5️⃣ 최댓값: f(2) = -16 + 12 = -4<br>
                    &nbsp;&nbsp;&nbsp;또는 f(5) = -25 + 12 = -13<br>
                    &nbsp;&nbsp;&nbsp;최댓값: <strong>-4</strong>`,
                    hint: "임계점과 끝점에서 함수값을 구하고 최솟값 조건을 이용하세요."
                }
            ]
        };

        function MathPracticeApp() {
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [currentProblem, setCurrentProblem] = useState(null);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userAnswer, setUserAnswer] = useState('');
            const [showSolution, setShowSolution] = useState(false);
            const [isCorrect, setIsCorrect] = useState(null);
            const [stats, setStats] = useState({ total: 0, correct: 0 });
            const [usedProblems, setUsedProblems] = useState(new Set());

            const categories = [
                { id: 'limit-indeterminate', name: '극한의 부정형', icon: '∞', description: '0/0 꼴, 인수분해, 유리화' },
                { id: 'continuity', name: '연속성', icon: '⟷', description: '연속 조건, 불연속점' },
                { id: 'derivative-definition', name: '미분계수 정의', icon: "f'", description: '극한으로 미분계수 구하기' },
                { id: 'tangent', name: '접선과 미분', icon: '📐', description: '접선의 방정식, 접선 조건' },
                { id: 'extrema', name: '극값과 증감', icon: '📈', description: '극댓값, 극솟값, 증가/감소' },
                { id: 'max-min', name: '최대·최소', icon: '⬆⬇', description: '구간에서 최댓값/최솟값' },
                { id: 'mvt', name: '평균값 정리', icon: '📊', description: '롤의 정리, 평균값 정리' },
                { id: 'equations', name: '방정식과 부등식', icon: '=', description: '실근의 개수, 부등식 증명' }
            ];

            const generateProblem = (category) => {
                const problems = problemSets[category];
                const availableIndices = problems.map((_, i) => i).filter(i => !usedProblems.has(`${category}-${i}`));
                
                let newIndex;
                if (availableIndices.length === 0) {
                    setUsedProblems(new Set());
                    newIndex = 0;
                } else {
                    newIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
                    setUsedProblems(prev => new Set([...prev, `${category}-${newIndex}`]));
                }
                
                setCurrentIndex(newIndex);
                setShowSolution(false);
                setIsCorrect(null);
                setUserAnswer('');
                setCurrentProblem(problems[newIndex]);
                
                setTimeout(() => {
                    if (window.MathJax && window.MathJax.typesetPromise) {
                        window.MathJax.typesetPromise();
                    }
                }, 300);
            };

            useEffect(() => {
                if (selectedCategory && problemSets[selectedCategory]) {
                    setTimeout(() => {
                        if (window.MathJax && window.MathJax.typesetPromise) {
                            window.MathJax.typesetPromise();
                        }
                    }, 300);
                }
            }, [currentProblem]);

            const checkAnswer = () => {
                if (!userAnswer.trim()) {
                    alert("답을 입력해주세요!");
                    return;
                }

                const normalizedUserAnswer = userAnswer.trim().replace(/\s/g, '').toLowerCase();
                const normalizedCorrectAnswer = currentProblem.answer.trim().replace(/\s/g, '').toLowerCase();
                
                const correct = normalizedUserAnswer === normalizedCorrectAnswer;
                setIsCorrect(correct);
                setShowSolution(true);
                
                setStats({
                    total: stats.total + 1,
                    correct: stats.correct + (correct ? 1 : 0)
                });

                setTimeout(() => {
                    if (window.MathJax && window.MathJax.typesetPromise) {
                        window.MathJax.typesetPromise();
                    }
                }, 300);
            };

            const nextProblem = () => {
                generateProblem(selectedCategory);
            };

            if (!selectedCategory) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-12">
                                <h1 className="text-4xl font-bold text-indigo-900 mb-4">📚 고2 미적분 무한 연습</h1>
                                <p className="text-lg text-gray-600">첨부한 문제와 유사한 문제로 실력 향상!</p>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {categories.map((cat) => (
                                    <div
                                        key={cat.id}
                                        onClick={() => {
                                            setSelectedCategory(cat.id);
                                            setCurrentIndex(0);
                                            setUsedProblems(new Set([`${cat.id}-0`]));
                                            setCurrentProblem(problemSets[cat.id][0]);
                                        }}
                                        className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all cursor-pointer transform hover:-translate-y-1 border-2 border-transparent hover:border-indigo-500"
                                    >
                                        <div className="text-4xl mb-3 text-center">{cat.icon}</div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-2 text-center">{cat.name}</h3>
                                        <p className="text-sm text-gray-600 text-center">{cat.description}</p>
                                        <p className="text-xs text-indigo-600 text-center mt-2">{problemSets[cat.id].length}개 문제</p>
                                    </div>
                                ))}
                            </div>

                            <div className="mt-12 bg-white rounded-xl p-6 shadow-lg">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">💡 사용 방법</h2>
                                <ol className="list-decimal list-inside space-y-2 text-gray-700">
                                    <li>위에서 연습하고 싶은 유형을 선택하세요</li>
                                    <li>랜덤으로 문제가 출제됩니다</li>
                                    <li>답을 입력하고 채점 받으세요</li>
                                    <li>틀렸다면 상세한 풀이를 확인하세요</li>
                                    <li>"다음 문제"를 눌러 계속 연습하세요</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-xl p-6 shadow-lg mb-6">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <button
                                        onClick={() => {
                                            setSelectedCategory(null);
                                            setCurrentProblem(null);
                                            setUsedProblems(new Set());
                                        }}
                                        className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"
                                    >
                                        ← 돌아가기
                                    </button>
                                    <div>
                                        <h2 className="text-xl font-bold text-indigo-900">
                                            {categories.find(c => c.id === selectedCategory)?.name}
                                        </h2>
                                        <p className="text-sm text-gray-600">
                                            {categories.find(c => c.id === selectedCategory)?.description}
                                        </p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4">
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-indigo-600">{stats.correct}/{stats.total}</div>
                                        <div className="text-xs text-gray-500">정답률</div>
                                    </div>
                                    {stats.total > 0 && (
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-green-600">
                                                {Math.round((stats.correct / stats.total) * 100)}%
                                            </div>
                                            <div className="text-xs text-gray-500">정확도</div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        {currentProblem && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-8 shadow-lg">
                                    <div className="flex items-start gap-4 mb-6">
                                        <BookOpen />
                                        <div className="flex-1">
                                            <h3 className="text-lg font-bold text-gray-800 mb-4">문제</h3>
                                            <div className="text-gray-700 text-lg leading-relaxed mb-4" dangerouslySetInnerHTML={{ __html: currentProblem.problem }} />
                                            {currentProblem.problemText && (
                                                <div className="bg-gray-50 p-3 rounded border border-gray-200 text-sm text-gray-600">
                                                    <strong>텍스트로 읽기:</strong> {currentProblem.problemText}
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {!showSolution && (
                                        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                                            <p className="text-sm font-semibold text-blue-800 mb-1">💡 힌트</p>
                                            <p className="text-blue-700" dangerouslySetInnerHTML={{ __html: currentProblem.hint }} />
                                        </div>
                                    )}
                                </div>

                                {!showSolution && (
                                    <div className="bg-white rounded-xl p-8 shadow-lg">
                                        <label className="block text-sm font-bold text-gray-700 mb-3">
                                            답을 입력하세요
                                        </label>
                                        <div className="flex gap-3">
                                            <input
                                                type="text"
                                                value={userAnswer}
                                                onChange={(e) => setUserAnswer(e.target.value)}
                                                onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                                placeholder="예: 3, -1/2, 2a+b"
                                                className="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 text-lg"
                                            />
                                            <button
                                                onClick={checkAnswer}
                                                className="px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2"
                                            >
                                                <Check />
                                                채점
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {showSolution && (
                                    <div className="space-y-6">
                                        <div className={`rounded-xl p-6 shadow-lg ${isCorrect ? 'bg-green-50 border-2 border-green-500' : 'bg-red-50 border-2 border-red-500'}`}>
                                            <div className="flex items-center gap-3 mb-3">
                                                {isCorrect ? (
                                                    <>
                                                        <Check />
                                                        <h3 className="text-xl font-bold text-green-800">정답입니다! 🎉</h3>
                                                    </>
                                                ) : (
                                                    <>
                                                        <X />
                                                        <h3 className="text-xl font-bold text-red-800">틀렸습니다</h3>
                                                    </>
                                                )}
                                            </div>
                                            <div className="ml-11">
                                                <p className="text-gray-700">
                                                    <span className="font-semibold">입력한 답:</span> {userAnswer}
                                                </p>
                                                <p className="text-gray-700 mt-1">
                                                    <span className="font-semibold">정답:</span> {currentProblem.answer}
                                                </p>
                                            </div>
                                        </div>

                                        <div className="bg-white rounded-xl p-8 shadow-lg">
                                            <h3 className="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                                                <ChevronRight />
                                                상세 풀이
                                            </h3>
                                            <div className="text-gray-700 leading-relaxed space-y-3" dangerouslySetInnerHTML={{ __html: currentProblem.solution }} />
                                        </div>

                                        <button
                                            onClick={nextProblem}
                                            className="w-full py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2 text-lg"
                                        >
                                            다음 문제 풀기
                                            <ChevronRight />
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MathPracticeApp />);
    </script>
</body>
</html>
